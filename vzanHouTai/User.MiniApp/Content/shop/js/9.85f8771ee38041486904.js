webpackJsonp([9],{"0p+0":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),r=s("exGp"),i=s.n(r),o=s("PKHo"),c=s("z5is"),l={name:"productItem",props:{productInfo:Object,index:Number},data:function(){return{}},methods:{},computed:{productStatus:function(){switch(this.productInfo.Display){case!0:return"theme-bg";case!1:return"theme-bg-blue"}}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-item bg-w mb20 f30"},[s("div",{staticClass:"top f border-bottom pb30 pr24"},[s("div",{staticClass:"product-img fs mr20 rel"},[s("img",{directives:[{name:"src",rawName:"v-src",value:t.productInfo.Img,expression:"productInfo.Img"}],staticClass:"product-img bgccc"}),t._v(" "),s("div",{staticClass:"abs base product-img cfff",class:t.productStatus},[s("span",{staticClass:"abs label"},[t._v(t._s(t.productInfo.Display?"已上架":"已下架"))])])]),t._v(" "),s("div",{staticClass:"fg1 f fv fj"},[s("div",{staticClass:"title ellipsis"},[t._v("\n        "+t._s(t.productInfo.Name)+"\n      ")]),t._v(" "),s("div",{staticClass:"f fv"},[s("div",{staticClass:"f22 c666 lh14"},[t._v("\n          "+t._s(t.productInfo.Class)+"\n        ")]),t._v(" "),-1!=t.productInfo.DailySupply?s("div",{staticClass:"f22 c666 lh14 mt8"},[t._v("\n          库存："+t._s(t.productInfo.DailySupply)+"\n        ")]):t._e(),t._v(" "),s("div",{staticClass:"price f28 mt8"},[t._v("\n          ￥"),s("span",{staticClass:"f36"},[t._v(t._s(t.productInfo.Price))])])])])]),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var u=s("VU/8")(l,d,!1,function(t){s("E0Ji")},null,null).exports,p=s("P7bn"),f=s("t1fn"),h=s("0+fh"),v=s("q0fy"),m=s("MqCY"),g=s("GKmE"),C=s("/SDt"),b=s("gnfT"),_={data:function(){return{domTitle:"商品管理",injectType:"",injectId:"",defultType:"全部",openMask:!1,btnList:[{eventType:"addProduct",class:"btn-null-blue",icon:"icon-icon_tianjia1",text:"添加商品"}],rightBtnList:[{eventType:"edit",class:"btn-null-red mr30",icon:"icon-icon_bianji-",text:"编辑"},{eventType:"delete",class:"btn-null-gray",icon:"icon-icon_shanchu1",text:"删除"}],pullUpLoad:{threshold:-50,txt:{more:"",noMore:"没有更多了"}},pullDownRefresh:{threshold:90,stop:40},productList:[],pageIndex:1,pageSize:10,StoreId:0,loadAll:!1,pageIndex2:1,pageSize2:20,loadAll2:!1,classifyList:[],foodName:""}},components:{"product-item":u,"btn-list":f.a,"item-bottom":p.a,selector:h.a,bescroll:m.a,nullData:C.a},mixins:[o.a,c.a],methods:{onPullingDown:function(){var t=this;setTimeout(i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resetData().getProductListC();case 2:t.$refs.bescroll.forceUpdate();case 3:case"end":return e.stop()}},e,t)})),1500)},onPullingUp:function(){var t=this;return i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadAll){e.next=3;break}return t.$refs.bescroll.forceUpdate(!1),e.abrupt("return");case 3:return t.pageIndex++,e.next=6,t.getProductListC();case 6:t.$refs.bescroll.forceUpdate(!0);case 7:case"end":return e.stop()}},e,t)}))()},switchMask:function(){this.$refs.selector.open()},handleSelect:function(t,e){this.injectType=t,this.injectId=e},getProductListC:function(t,e){var s=this;return i()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.getProductList(s.StoreId,s.pageIndex,s.pageSize,t,e);case 2:(r=n.sent)&&r.page.length>0&&(s.productList=s.productList.concat(r.page),r.page.length<s.pageSize?s.loadAll=!0:s.loadAll=!1);case 4:case"end":return n.stop()}},n,s)}))()},getProductClassifyListC:function(){var t=this;return i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.getSpecList.call(t,"getProductClassifyList","classifyList","pageIndex2","pageSize2","loadAll2");case 2:case"end":return e.stop()}},e,t)}))()},resetData:function(){return this.pageIndex=1,this.pageSize=10,this.productList=[],this},searchFood:function(){var t=this;return i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.a.showLoading("搜索中"),e.next=3,t.resetData().getProductListC(t.injectId,t.foodName);case 3:case"end":return e.stop()}},e,t)}))()},handleAddProduct:function(){g.a.routerPush(this,"products_edit?id="+this.StoreId+"&mode=create")},handleEdit:function(t){var e=this.productList[t];g.a.routerPush(this,"products_edit?pid="+e.Id+"&mode=edit&id="+this.StoreId)},handleDelete:function(t){var e=this,s=this.productList[t];g.a.msgConfirm("确实要删除吗？",i()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return g.a.showLoading("删除中"),t.next=3,v.a.deleteProduct(s.Id);case 3:t.sent&&(e.$toast("删除成功"),e.resetData().getProductListC());case 5:case"end":return t.stop()}},t,e)})))}},mounted:function(){this.getProductListC(),this.getProductClassifyListC()}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-manage f30"},[s("div",{staticClass:"wrapper fixed top0 w-full border-bottom z10"},[s("div",{staticClass:"header f jc fc"},[s("div",{staticClass:"input-wrap bg-w f fc f26"},[s("div",{staticClass:"type f fc jc fs mr20",attrs:{id:"type"},on:{click:t.switchMask}},[s("span",{staticClass:"f28 tc display-inline-block type-content ellipsis C5C4CC "},[t._v(t._s(t.injectType||"全部"))]),s("i",{staticClass:"dzicon icon-icon_fanhui arrow f40 c999"})]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.foodName,expression:"foodName"}],staticClass:"fg1 input c999 f26",attrs:{type:"text",placeholder:"请输入商品名称"},domProps:{value:t.foodName},on:{input:function(e){e.target.composing||(t.foodName=e.target.value)}}}),t._v(" "),s("span",{staticClass:"c333 ml10 mr30",on:{click:t.searchFood}},[t._v("搜索")])])]),t._v(" "),s("btn-list",{attrs:{btnList:t.btnList},on:{addProduct:t.handleAddProduct}})],1),t._v(" "),s("selector",{ref:"selector",attrs:{fixTop:15,"el-id":"type",list:t.classifyList},on:{selected:t.handleSelect}}),t._v(" "),s("bescroll",{ref:"bescroll",attrs:{pullDownRefresh:t.pullDownRefresh,data:t.productList,listenScrollEnd:!0,pullUpLoad:t.pullUpLoad,wrapperClass:"top: 38vw;"},on:{pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[s("div",{staticClass:"list"},t._l(t.productList,function(e,n){return s("product-item",{key:n,attrs:{productInfo:e}},[s("item-bottom",{attrs:{index:n,leftContent:"排序"+e.Sort,rightBtnList:t.rightBtnList},on:{edit:t.handleEdit,delete:t.handleDelete}})],1)}))]),t._v(" "),s("null-data",{attrs:{show:!t.productList.length}})],1)},staticRenderFns:[]};var x=s("VU/8")(_,w,!1,function(t){s("8/Hr")},null,null);e.default=x.exports},"8/Hr":function(t,e){},E0Ji:function(t,e){}});