webpackJsonp([29],{mftG:function(t,e){},tDZ8:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mvHQ"),i=s.n(n),a=s("Xxa5"),r=s.n(a),o=s("exGp"),l=s.n(o),c=s("PKHo"),f=s("t1fn"),u=s("P7bn"),d=s("GKmE"),p=s("MqCY"),h=s("q0fy"),m=s("z5is"),v=s("gnfT"),g={mixins:[c.a,m.a],data:function(){return{pullUpLoad:{text:{more:"",noMore:"没有更多"},threshold:-50},pullDownRefresh:{threshold:90,stop:40},domTitle:"分类管理",topBtnList:[{eventType:"addClassify",class:"btn-null-blue",text:"增加分类",icon:"icon-icon_tianjia1"}],rightBtnList:[{eventType:"edit",class:"btn-null-red mr24",text:"编辑",icon:"icon-icon_bianji-"},{eventType:"delete",class:"btn-null-gray mr24",text:"删除",icon:"icon-icon_shanchu1"}],pageIndex:1,pageSize:10,loadAll:!1,classifyList:[],StoreId:0}},methods:{onPullingDown:function(){var t=this;setTimeout(l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resetData().getClassifyList();case 2:t.$refs.bescroll.forceUpdate();case 3:case"end":return e.stop()}},e,t)})),1500)},handleDelete:function(t){var e=this;return l()(r.a.mark(function s(){var n;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n=e.classifyList[t],d.a.msgConfirm("确定要删除该分类吗",l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d.a.showLoading("请稍候"),t.next=3,h.a.removeProductClassify(n.Id);case 3:t.sent&&(e.$toast("删除成功"),setTimeout(function(){window.location.reload()},500));case 5:case"end":return t.stop()}},t,e)})));case 2:case"end":return s.stop()}},s,e)}))()},handleEdit:function(t){var e=this.classifyList[t];d.a.routerPush(this,"classify_edit?mode=edit&classifyId="+e.Id+"&classifyInfo="+i()(e))},onPullingUp:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadAll){e.next=3;break}return t.$refs.bescroll.forceUpdate(!1),e.abrupt("return");case 3:return t.pageIndex++,e.next=6,t.getClassifyList();case 6:t.$refs.bescroll.forceUpdate(!0);case 7:case"end":return e.stop()}},e,t)}))()},resetData:function(){return this.pageIndex=1,this.pageSize=10,this.propertyList=[],this},getClassifyList:function(){v.a.getSpecList.call(this,"getProductClassifyList","classifyList","pageIndex","pageSize","loadAll")},goAddClassify:function(){d.a.routerPush(this,"classify_edit?mode=create&id="+this.StoreId)}},components:{btnList:f.a,itemBottom:u.a,bescroll:p.a},mounted:function(){this.getClassifyList()}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"classify-manage"},[s("div",{staticClass:"fixed top0 w-full z10"},[s("btnList",{attrs:{btnList:t.topBtnList},on:{addClassify:t.goAddClassify}})],1),t._v(" "),s("bescroll",{ref:"bescroll",attrs:{pullDownRefresh:t.pullDownRefresh,data:t.classifyList,listenScrollEnd:!0,pullUpLoad:t.pullUpLoad,wrapperClass:"top: 23.5vw;"},on:{pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[s("div",{staticClass:"list mt100"},t._l(t.classifyList,function(e,n){return s("div",{staticClass:"item mb20 bg-w pl24 f30 c333 f fv"},[s("div",{staticClass:"top border-bottom f fc"},[s("img",{directives:[{name:"src",rawName:"v-src",value:e.Icon,expression:"item.Icon"}],staticClass:"avator mr24"}),t._v(" "),s("div",{staticClass:"f fv fj h80"},[s("div",{staticClass:"title f30"},[t._v(t._s(e.Name))]),t._v(" "),s("div",{staticClass:"theme-color-blue f22"},[s("span",{staticClass:"c666"},[t._v("显示状态：")]),t._v(" "+t._s(1===e.Display?"已开启":"已隐藏")+"\n            ")])])]),t._v(" "),s("itemBottom",{attrs:{leftContent:"排序："+e.Sort,index:n,rightBtnList:t.rightBtnList},on:{delete:t.handleDelete,edit:t.handleEdit}})],1)}))])],1)},staticRenderFns:[]};var L=s("VU/8")(g,y,!1,function(t){s("mftG")},null,null);e.default=L.exports}});