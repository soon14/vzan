webpackJsonp([30],{"73S6":function(t,e){},N0PT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),i=a("exGp"),c=a.n(i),l=a("PKHo"),o=a("wt7V"),n=a("0+fh"),p=a("Hj/8"),d=a("gnfT"),u=a("Zazt"),v=a("1sGI"),f=a.n(v),h=a("GKmE"),y=a("q0fy"),m={mixins:[l.a],data:function(){return{domTitle:"属性编辑",productType:{value:"",placeholder:"请选择商品类型",title:"商品类型",list:[]},propertyName:{value:"",placeholder:"请输入属性名称",title:"属性名称"},selectableList:{value:"",placeholder:"请输入可选值",title:"可选值列表"},sort:{value:"",placeholder:"请输入排序",title:"排序"},attrId:0,mode:"create",StoreId:0,pageIndex:1,pageSize:10,loadAll:!1,typeId:0,validation:null}},components:{"btn-bottom":o.a,selector:n.a,"input-assistor":p.a,error:u.a},methods:{save:function(){var t={Name:this.propertyName.value,Option:this.selectableList.value.split(","),Sort:this.sort.value,AttrTypeId:this.productType.value.id};if(this.validation=new f.a(t,{Name:"required",Option:"arrayHasContent",Sort:"required",AttrTypeId:"required"},{"required.Name":"属性名称不能为空","required.Sort":"排序称不能为空","arrayHasContent.Option":"可选值列表不能为空","required.attrTypeId":"商品类型不能为空"}),this.validation.validate()){var e=t.AttrTypeId;h.a.showLoading("请稍候"),"edit"===this.mode?this.edit(this.attrId,t):delete t.attrTypeId&&this.create(e,t)}},edit:function(t,e){var a=this;return c()(r.a.mark(function s(){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,y.a.editProductAttrbute(t,e);case 2:if(!s.sent){s.next=7;break}return s.next=6,a.$messagebox.alert("修改成功");case 6:a.$router.go(-1);case 7:case"end":return s.stop()}},s,a)}))()},create:function(t,e){var a=this;return c()(r.a.mark(function s(){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,y.a.addProductAttrbute(t,e);case 2:if(!s.sent){s.next=7;break}return s.next=6,a.$messagebox.alert("新增成功");case 6:a.$router.go(-1);case 7:case"end":return s.stop()}},s,a)}))()},getClassifyList:function(){var t=this;return c()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getProductAttrbuteTypeList.call(t,"productType.list");case 2:t.productType.list.length>0&&(a=t.productType.list.find(function(e){return e.Id==t.typeId}),t.$refs.TypeSelector.injectStatus(a));case 3:case"end":return e.stop()}},e,t)}))()},switchSelector:function(t){this.$refs[t].open()},handleProductClassifySelect:function(t,e){this.productType.value={v:t,id:e}},mappingValue:function(t,e){switch(t){case"属性名称":this.propertyName.value=e;break;case"可选值列表":this.selectableList.value=e;break;case"排序":this.sort.value=e}},preInject:function(t,e,a){this.$refs.assistor.open(t,e,a)},handleMode:function(){var t=this.$route.query,e=this.mode=t.mode,a=t.attrId;if("edit"==e){var s=JSON.parse(t.attrInfo);console.log(s),this.attrId=a,this.propertyName.value=s.Name,this.selectableList.value=s.Item.join(","),this.sort.value=s.Sort}this.StoreId=t.StoreId,this.typeId=t.pid}},mounted:function(){this.handleMode(),this.getClassifyList()}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"type_property_edit"},[a("div",{staticClass:"bg-w pl24 c333 f30 pb20"},[a("div",{staticClass:"f fv config-group-wrapper"},[a("div",{staticClass:"config-group f fc fj",attrs:{id:"productClassify"}},[a("span",{staticClass:"left fs"},[t._v(t._s(t.productType.title))]),t._v(" "),a("div",{staticClass:"fg1 tr lh14",class:t.productType.value.v?"theme-color":"cccc",on:{click:function(e){t.switchSelector("TypeSelector")}}},[t._v(t._s(t.productType.value.v||t.productType.placeholder)+"\n          "),a("i",{staticClass:"dzicon icon-icon_xiala1"})])]),t._v(" "),a("error",{attrs:{validation:t.validation,check:"attrTypeId"}})],1),t._v(" "),a("div",{staticClass:"f fv config-group-wrapper"},[a("div",{staticClass:"config-group f fc fj"},[a("span",{staticClass:"left fs"},[t._v(t._s(t.propertyName.title))]),t._v(" "),a("div",{staticClass:" fg1 tr lh14",class:t.propertyName.value?"c666":"cccc",on:{click:function(e){t.preInject(t.propertyName.title,t.propertyName.placeholder,t.propertyName.value)}}},[t._v(t._s(t.propertyName.value||t.propertyName.placeholder))])]),t._v(" "),a("error",{attrs:{validation:t.validation,check:"Name"}})],1),t._v(" "),a("div",{staticClass:"f fv config-group-wrapper"},[a("div",{staticClass:"config-group f fc fj"},[a("span",{staticClass:"left w-force lh14 fs f fv"},[a("div",{staticClass:"f30"},[t._v(t._s(t.selectableList.title))]),t._v(" "),a("div",{staticClass:"tips w-force lh14 f20 theme-color-blue mt10"},[t._v("\n            将自动排除重复的，空白的属性\n          ")])]),t._v(" "),a("div",{staticClass:" fg1 tr lh14",class:t.selectableList.value?"c666":"cccc",on:{click:function(e){t.preInject(t.selectableList.title,t.selectableList.placeholder,t.selectableList.value)}}},[t._v(t._s(t.selectableList.value||t.selectableList.placeholder))])]),t._v(" "),a("error",{attrs:{validation:t.validation,check:"Option"}})],1),t._v(" "),a("div",{staticClass:"f fv config-group-wrapper"},[a("div",{staticClass:"config-group f fc fj"},[a("span",{staticClass:"left w-force lh14 fs f fv"},[a("div",{staticClass:"f30"},[t._v(t._s(t.sort.title))]),t._v(" "),a("div",{staticClass:"tips w-force lh14 f20 theme-color-blue mt10"},[t._v("\n            数字越小越靠前\n          ")])]),t._v(" "),a("div",{staticClass:" fg1 tr lh14",class:t.sort.value?"c666":"cccc",on:{click:function(e){t.preInject(t.sort.title,t.sort.placeholder,t.sort.value)}}},[t._v(t._s(t.sort.value||t.sort.placeholder))])]),t._v(" "),a("error",{attrs:{validation:t.validation,check:"Sort"}})],1)]),t._v(" "),a("btn-bottom",{attrs:{isFixed:""},on:{click:t.save}}),t._v(" "),a("input-assistor",{ref:"assistor",on:{click:t.mappingValue}}),t._v(" "),a("selector",{ref:"TypeSelector",attrs:{"el-id":"productClassify",list:t.productType.list},on:{selected:t.handleProductClassifySelect}})],1)},staticRenderFns:[]};var g=a("VU/8")(m,_,!1,function(t){a("73S6")},null,null);e.default=g.exports}});