webpackJsonp([13],{Qefj:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("exGp"),i=s.n(r),o=s("PKHo"),p=s("t1fn"),l=s("P7bn"),c=s("GKmE"),d=s("MqCY"),u=s("q0fy"),f=s("z5is"),m=s("gnfT"),h={mixins:[o.a,f.a],data:function(){return{pullUpLoad:{text:{more:"",noMore:"没有更多"},threshold:-50},pullDownRefresh:{threshold:90,stop:40},domTitle:"类型管理",topBtnList:[{eventType:"addType",class:"btn-null-blue",text:"增加类型",icon:"icon-icon_tianjia1"}],rightBtnList:[{eventType:"goPropertyList",class:"btn-null-blue mr24",text:"属性列表",icon:"icon-icon_leixingguanli"},{eventType:"edit",class:"btn-null-red mr24",text:"编辑",icon:"icon-icon_bianji-"},{eventType:"delete",class:"btn-null-gray mr24",text:"删除",icon:"icon-icon_shanchu1"}],popupVisible:!1,addForm:{isOpen:"false",typeName:"",mode:"create",id:0},options:[{label:"开启",value:"1"},{label:"关闭",value:"0"}],pageIndex:1,pageSize:10,loadAll:!1,propertyList:[],StoreId:0}},methods:{confirm:function(){"edit"===this.addForm.mode?this.editType():this.addType()},editType:function(){var t=this;return i()(n.a.mark(function e(){var s,a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.addForm,a=s.id,r="false"!==s.isOpen,c.a.showLoading("请稍候"),e.next=6,u.a.editProductAttrbuteType(a,s.typeName,r);case 6:e.sent&&(t.$toast("操作成功"),t.resetData().getpropertyList(),t.popupVisible=!1);case 8:case"end":return e.stop()}},e,t)}))()},addType:function(){var t=this;return i()(n.a.mark(function e(){var s,a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.addForm,a=t.addForm.id,r="false"!==s.isOpen,c.a.showLoading("请稍候"),e.next=6,u.a.addProductAttrbuteType(a,s.typeName,r);case 6:e.sent&&(t.$toast("操作成功"),t.resetData().getpropertyList(),t.popupVisible=!1);case 8:case"end":return e.stop()}},e,t)}))()},handleEdit:function(t){this.popupVisible=!this.popupVisible,this.addForm.mode="edit";var e=this.propertyList[t];console.log(e),this.addForm.id=e.Id,this.addForm.typeName=e.Name,this.addForm.isOpen=String(e.Enable)},handleAddType:function(){this.addForm={isOpen:"false",typeName:"",mode:"create",id:0},this.popupVisible=!this.popupVisible,this.addForm.mode="create",this.addForm.id=this.StoreId},goPropertyList:function(t){var e=this.propertyList[t].Id;c.a.routerPush(this,"type_property_list?pid="+e+"&StoreId="+this.StoreId)},onPullingUp:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadAll){e.next=3;break}return t.$refs.bescroll.forceUpdate(!1),e.abrupt("return");case 3:return t.pageIndex++,e.next=6,t.getpropertyList();case 6:t.$refs.bescroll.forceUpdate(!0);case 7:case"end":return e.stop()}},e,t)}))()},onPullingDown:function(){var t=this;setTimeout(i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resetData().getpropertyList();case 2:t.$refs.bescroll.forceUpdate();case 3:case"end":return e.stop()}},e,t)})),1500)},resetData:function(){return this.pageIndex=1,this.pageSize=10,this.propertyList=[],this},getpropertyList:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getProductAttrbuteTypeList.call(t,"propertyList");case 2:case"end":return e.stop()}},e,t)}))()},handleDelete:function(t){var e=this;return i()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:a=e.propertyList[t].Id,c.a.msgConfirm("确定要删除该分类？",i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.a.showLoading("请稍候"),t.next=3,u.a.deleteProductAttrbuteType(a);case 3:t.sent&&(e.$messagebox.alert("删除成功"),e.resetData().getpropertyList());case 5:case"end":return t.stop()}},t,e)})));case 2:case"end":return s.stop()}},s,e)}))()}},mounted:function(){this.getpropertyList()},components:{btnList:p.a,itemBottom:l.a,bescroll:d.a}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"type-manage"},[s("div",{staticClass:"fixed top0 w-full z10"},[s("btnList",{attrs:{btnList:t.topBtnList},on:{addType:t.handleAddType}})],1),t._v(" "),s("bescroll",{ref:"bescroll",attrs:{pullDownRefresh:t.pullDownRefresh,data:t.propertyList,listenScrollEnd:!0,pullUpLoad:t.pullUpLoad,wrapperClass:"top: 23vw;"},on:{pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},[s("div",{staticClass:"list"},t._l(t.propertyList,function(e,a){return s("div",{staticClass:"item bg-w mb20 f28"},[s("div",{staticClass:"top pw24 f fv jc"},[s("div",{staticClass:"group"},[s("span",{staticClass:"c666 mr5"},[t._v("\n              分类名称：\n            ")]),t._v(" "),s("span",{staticClass:"c333"},[t._v("\n              "+t._s(e.Name)+"\n            ")])]),t._v(" "),s("div",{staticClass:"group mt20"},[s("span",{staticClass:"c666 mr5"},[t._v("\n              显示状态：\n            ")]),t._v(" "),s("span",{staticClass:"c333"},[t._v("\n              "+t._s(1==e.Enable?"已开启":"已关闭")+"\n            ")])])]),t._v(" "),s("div",{staticClass:"pl24"},[s("itemBottom",{attrs:{index:a,rightBtnList:t.rightBtnList,leftContent:"属性数："+e.Count},on:{delete:t.handleDelete,edit:t.handleEdit,goPropertyList:t.goPropertyList}})],1)])}))]),t._v(" "),s("mt-popup",{model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("div",{staticClass:"modal"},[s("div",{staticClass:"edit-item f30 c333"},[s("mt-field",{attrs:{label:"类型名称:",placeholder:"请输入类型名称"},model:{value:t.addForm.typeName,callback:function(e){t.$set(t.addForm,"typeName",e)},expression:"addForm.typeName"}})],1),t._v(" "),s("div",{staticClass:"config-group f fc fj"},[s("span",{staticClass:"left fs f fv"},[s("div",{staticClass:"f30"},[t._v("是否启用")])]),t._v(" "),s("div",{staticClass:"c666 fg1 tr lh14"},[s("mt-radio",{attrs:{options:t.options},model:{value:t.addForm.isOpen,callback:function(e){t.$set(t.addForm,"isOpen",e)},expression:"addForm.isOpen"}})],1)]),t._v(" "),s("div",{staticClass:"pw24 mt40"},[s("mt-button",{attrs:{size:"large",type:"primary"},on:{click:t.confirm}},[t._v("确认")])],1)])])],1)},staticRenderFns:[]};var y=s("VU/8")(h,v,!1,function(t){s("uNBM")},null,null);e.default=y.exports},uNBM:function(t,e){}});